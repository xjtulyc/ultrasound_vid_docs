# d2的配置文件

网络参数可以通过配置文件或者直接在代码里写入两种方式进行配置，一些公用的就写在代码里，需要调整的就卸载配置文件里，修改起来较为方便。

所有的网络配置基本都是可以通过配置文件进行完成，个人认为，这是学习Detectron2框架过程中最需要学习和掌握的一个重要的环节。

## 1. yaml语法
yaml文件在detectron2整个框架中作为配置文件进行参数配置的

YAML以数据为中心，比json、xml等更适合做配置文件

1. 基本语法规则

- 大小写敏感
- 使用缩进表示层级关系
- 缩进时不允许使用Tab键，只允许使用空格
- 缩进的空格数目不重要，只要相同层级的元素左对齐即可。

2. 支持的数据结构

- 对象：键值对的集合，又称为映射（mapping）/ 哈希（hashes） / 字典（dictionary）
- 数组：一组按次序排列的值，又称为序列（sequence） / 列表（list）
- 字面量（数字、字符串、布尔值）：单个的、不可再分的值

3. 具体写法

**字面量（数字、字符串、布尔值）**
- k: v :字面量直接写，字符串默认不用加上单引号或者双引号，冒号后面必须有一个空格
- 双引号：会转义特殊字符
- 单引号：不会转义字符串里边的特殊字符；特殊字符会作为本身想表示的意思

如

```yaml
name: zhangsan
age: 20
isBoss: false
```

**数组**
多行写法使用``- 值``来表示数组中的一个元素，需要注意缩进；单行使用``[值，值]``来表示一个数组

```yaml
#多行结构
friends：
 - zhangsan
 - lisi
 - wangwu

#单行结构
friend:[zhangsan,lisi,wangwu]
```

**对象**
- 多行写法：key：value的形式，使用多行写法需要注意缩进
- 单行写法：使用{key:value}的形式书写

```yaml
#多行结构
friend:
 name:zhangsan
 age:20

#单行结构
friend:{name:zhangsan,age:20}
```

## 2. 如何在d2下使用配置文件
在d2中，配置文件放置于项目的``config\``文件夹下面。每次实验之前，需要确保配置文件正确。基本流程是

1. 根据``.yaml``文件的路径获得cfg；
2. 将cfg解析为**树状**的数据结构；
3. 在文件中调用配置参数。

